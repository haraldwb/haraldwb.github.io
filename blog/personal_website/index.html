<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Building a personal website with Hugo and Github Pages | Harald W. Bøe</title><meta name=keywords content><meta name=description content="There&rsquo;s a ton of different frameworks, tools and platforms available when building a personal website today.
In this post I&rsquo;ll go into how and why I chose to build my webpage using the Hugo framework. I&rsquo;ll also show how to setup the hosting on Github pages which includes pushing the webpage from a private repository to a public one with Github Actions.
My requirements for the tech stack were:

Fast
Low maintenance
Easy to create and manage content
Content version control
Automated deployment
Low cost

Hugo is a static site generator which typically makes loading of webpages extremely fast.
Static sites are also in general low maintenance.
All content are markdown files which makes it easy to see changes with git and makes the content highly portable.
By hosting it on github pages we get automated deployment from github actions and low cost. I only pay for the domain itself."><meta name=author content><link rel=canonical href=https://hboe.no/blog/personal_website/><link crossorigin=anonymous href=/assets/css/stylesheet.a090830a421002426baafbd314e38f149d77b4c48a12ee9312700d770b27fb26.css integrity="sha256-oJCDCkIQAkJrqvvTFOOPFJ13tMSKEu6TEnANdwsn+yY=" rel="preload stylesheet" as=style><link rel=icon href=https://hboe.no/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://hboe.no/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://hboe.no/favicon-32x32.png><link rel=apple-touch-icon href=https://hboe.no/apple-touch-icon.png><link rel=mask-icon href=https://hboe.no/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://hboe.no/blog/personal_website/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://hboe.no/blog/personal_website/"><meta property="og:site_name" content="Harald W. Bøe"><meta property="og:title" content="Building a personal website with Hugo and Github Pages"><meta property="og:description" content="There’s a ton of different frameworks, tools and platforms available when building a personal website today.
In this post I’ll go into how and why I chose to build my webpage using the Hugo framework. I’ll also show how to setup the hosting on Github pages which includes pushing the webpage from a private repository to a public one with Github Actions.
My requirements for the tech stack were:
Fast Low maintenance Easy to create and manage content Content version control Automated deployment Low cost Hugo is a static site generator which typically makes loading of webpages extremely fast. Static sites are also in general low maintenance. All content are markdown files which makes it easy to see changes with git and makes the content highly portable. By hosting it on github pages we get automated deployment from github actions and low cost. I only pay for the domain itself."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2024-08-19T00:00:00+00:00"><meta property="article:modified_time" content="2024-08-22T09:18:02+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Building a personal website with Hugo and Github Pages"><meta name=twitter:description content="There&rsquo;s a ton of different frameworks, tools and platforms available when building a personal website today.
In this post I&rsquo;ll go into how and why I chose to build my webpage using the Hugo framework. I&rsquo;ll also show how to setup the hosting on Github pages which includes pushing the webpage from a private repository to a public one with Github Actions.
My requirements for the tech stack were:

Fast
Low maintenance
Easy to create and manage content
Content version control
Automated deployment
Low cost

Hugo is a static site generator which typically makes loading of webpages extremely fast.
Static sites are also in general low maintenance.
All content are markdown files which makes it easy to see changes with git and makes the content highly portable.
By hosting it on github pages we get automated deployment from github actions and low cost. I only pay for the domain itself."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://hboe.no/blog/"},{"@type":"ListItem","position":2,"name":"Building a personal website with Hugo and Github Pages","item":"https://hboe.no/blog/personal_website/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Building a personal website with Hugo and Github Pages","name":"Building a personal website with Hugo and Github Pages","description":"There\u0026rsquo;s a ton of different frameworks, tools and platforms available when building a personal website today.\nIn this post I\u0026rsquo;ll go into how and why I chose to build my webpage using the Hugo framework. I\u0026rsquo;ll also show how to setup the hosting on Github pages which includes pushing the webpage from a private repository to a public one with Github Actions.\nMy requirements for the tech stack were:\nFast Low maintenance Easy to create and manage content Content version control Automated deployment Low cost Hugo is a static site generator which typically makes loading of webpages extremely fast. Static sites are also in general low maintenance. All content are markdown files which makes it easy to see changes with git and makes the content highly portable. By hosting it on github pages we get automated deployment from github actions and low cost. I only pay for the domain itself.\n","keywords":[],"articleBody":"There’s a ton of different frameworks, tools and platforms available when building a personal website today.\nIn this post I’ll go into how and why I chose to build my webpage using the Hugo framework. I’ll also show how to setup the hosting on Github pages which includes pushing the webpage from a private repository to a public one with Github Actions.\nMy requirements for the tech stack were:\nFast Low maintenance Easy to create and manage content Content version control Automated deployment Low cost Hugo is a static site generator which typically makes loading of webpages extremely fast. Static sites are also in general low maintenance. All content are markdown files which makes it easy to see changes with git and makes the content highly portable. By hosting it on github pages we get automated deployment from github actions and low cost. I only pay for the domain itself.\nThese are the steps required to get your own site up and running:\nInstalling Hugo and choosing your theme. Create your username.github.io repository, where username is your username on Github. Remember to set it as public. Create your private repo with a name of your choosing. Initiate a new Hugo project in the private repo and add Papermod theme as a submodule. Create a GH action for automatic compilation and deployment of Hugo’s public folder from your private to public repo. (Optional) Setup your custom domain name. Where applicable I’ve linked to resources which goes into detail on specific steps. The content I’ve linked to goes deeper into the material and is more likely to be updated if there’s been any changes. I recommend to use this post more as a high-level guide of the steps involved and diving into the linked content when you need further details.\nCreating your website Installation and introduction to Hugo Hugo has a great quick start page here which goes through how to install Hugo, a theme and gives an overview of basic commands. This youtube video from Luke Smith is also a great introduction which I used when learning how Hugo works.\nNote that your configuration file can either be YAML, TOML or JSON. I went for the yaml format as that’s what I’m used to.\nChoosing your theme You can preview a ton of themes at themes.gohugo.io. Another alternative is to look at the hugo-theme topic on github which can give you an idea of which themes are the most popular. I went for papermod as the theme. There is a great guide available at the papermod wiki on how to install it. I used method 2 and installed papermod as a Git Submodule as it makes it easy to apply future updates.\nArchitecture If you have a free github account your site repo needs to be public. When Hugo compiles your website all required content to render it is dumped into the public folder. This means that in order to keep our drafts secret we can keep our main repo as a private repo and deploy the public folder to the public facing repo using github actions. This ensures your drafts are kept secret until it’s ready to be published.\nOnce your website is ready to be published it’s time to setup the automated deployment. I used the gh action template available at finisky as a starting point and did the following changes:\nUpdated the versions Included the git submodules in the checkout step Run Hugo with –minify flag to reduce the size of the generated HTML files which should give slightly faster page loading. Place the following script in your private repo in this directory: .github/workflows/publish.yml\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 name: Hugo Build \u0026 Deploy - Private to Public repo on: pull_request: branches: [ main ] jobs: build: runs-on: ubuntu-latest steps: - name: Checkout uses: actions/checkout@v4 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod persist-credentials: false # Setup Hugo - name: Hugo setup uses: peaceiris/actions-hugo@v3 with: hugo-version: 'latest' # Download (if necessary) and use Hugo extended version. Example: true extended: false # Runs Hugo to build the Static Site - name: Run Hugo run: | hugo --minify --logLevel info # Deploy the Static Site to Public Repo (GitHub Pages) - name: Deploy uses: JamesIves/github-pages-deploy-action@v4 with: token: ${{ secrets.PAT_DEPLOYMENT }} repository-name: haraldwb/haraldwb.github.io branch: main # The branch the action should deploy to. folder: public # The folder the action should deploy. single-commit: true commit-message: ${{ github.event.pull_request.title }} The action itself uses a combination of jobs, these are:\nCheckout to make the private repo accessible to the rest of the workflow Actions-Hugo to build the Hugo site GitHub Pages Deploy Action for automatic deployment to Github Pages. In our case copying the public folder over the public facing repository. In order for the action to work we need to create a Personal Access Token (PAT).\nIdeally we want a fine-grained PAT to be inline with principle of least privilege. The action requires workflow and write:packages scopes. The latter is not supported yet so we need to create a classic PAT. Follow this guide to create it.\nAfter creating it change the PAT_DEPLOYMENT on line 36 in the script to the PAT secret name and change the repository-name on line 35 to your corresponding github pages.\nThis action deploys on pull request. If you’d rather prefer it to run on pushes to main change lines 3-5 to:\n1 2 3 4 on: push: branches: - main and remove the commit-message on line 41. I use pull_request as I like to verify that everything was published correctly and in case I find any last minute typos.\nThat should be it! If everything is configured correctly your site should be up and running and pushing changes to the site any time you do either a pull request or push depending on your config.\n(Optional) Custom domain name The workflow for how to use a custom domain name is available on github docs here. I also used this stackoverflow post for some clarification. After finishing the configuration your DNS records should look something like this:\n","wordCount":"1058","inLanguage":"en","datePublished":"2024-08-19T00:00:00Z","dateModified":"2024-08-22T09:18:02+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://hboe.no/blog/personal_website/"},"publisher":{"@type":"Organization","name":"Harald W. Bøe","logo":{"@type":"ImageObject","url":"https://hboe.no/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://hboe.no/ accesskey=h title="Harald W. Bøe (Alt + H)">Harald W. Bøe</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://hboe.no/blog/ title=blog><span>blog</span></a></li><li><a href=https://hboe.no/about title=about><span>about</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://hboe.no/>Home</a>&nbsp;»&nbsp;<a href=https://hboe.no/blog/>Blog</a></div><h1 class="post-title entry-hint-parent">Building a personal website with Hugo and Github Pages</h1><div class=post-meta><span title='2024-08-19 00:00:00 +0000 UTC'>August 19, 2024</span></div></header><div class=post-content><p>There&rsquo;s a ton of different frameworks, tools and platforms available when building a personal website today.<br>In this post I&rsquo;ll go into how and why I chose to build my webpage using the <a href=https://gohugo.io/>Hugo</a> framework. I&rsquo;ll also show how to setup the hosting on Github pages which includes pushing the webpage from a private repository to a public one with Github Actions.</p><p>My requirements for the tech stack were:</p><ul><li>Fast</li><li>Low maintenance</li><li>Easy to create and manage content</li><li>Content version control</li><li>Automated deployment</li><li>Low cost</li></ul><p>Hugo is a static site generator which typically makes loading of webpages extremely fast.
Static sites are also in general low maintenance.
All content are markdown files which makes it easy to see changes with git and makes the content highly portable.
By hosting it on github pages we get automated deployment from github actions and low cost. I only pay for the domain itself.</p><p>These are the steps required to get your own site up and running:</p><ol><li>Installing Hugo and choosing your theme.</li><li>Create your <code>username.github.io</code> repository, where username is your username on Github. Remember to set it as public.</li><li>Create your private repo with a name of your choosing.</li><li>Initiate a new Hugo project in the private repo and add Papermod theme as a submodule.</li><li>Create a GH action for automatic compilation and deployment of Hugo&rsquo;s public folder from your private to public repo.</li><li>(Optional) Setup your custom domain name.</li></ol><p>Where applicable I&rsquo;ve linked to resources which goes into detail on specific steps.
The content I&rsquo;ve linked to goes deeper into the material and is more likely to be updated if there&rsquo;s been any changes.
I recommend to use this post more as a high-level guide of the steps involved and diving into the linked content when you need further details.</p><h2 id=creating-your-website>Creating your website<a hidden class=anchor aria-hidden=true href=#creating-your-website>#</a></h2><h3 id=installation-and-introduction-to-hugo>Installation and introduction to Hugo<a hidden class=anchor aria-hidden=true href=#installation-and-introduction-to-hugo>#</a></h3><p>Hugo has a great <a href=https://gohugo.io/getting-started/quick-start/>quick start page here</a> which goes through how to install Hugo, a theme and gives an overview of basic commands.
<a href="https://youtu.be/ZFL09qhKi5I?si=H9L-tpk2hyAMp8Mw">This youtube video from Luke Smith</a> is also a great introduction which I used when learning how Hugo works.</p><p>Note that your configuration file can either be YAML, TOML or JSON.
I went for the yaml format as that&rsquo;s what I&rsquo;m used to.</p><h3 id=choosing-your-theme>Choosing your theme<a hidden class=anchor aria-hidden=true href=#choosing-your-theme>#</a></h3><p>You can preview a ton of themes at <a href=https://themes.gohugo.io/>themes.gohugo.io</a>.
Another alternative is to look at the <a href=https://github.com/topics/hugo-theme>hugo-theme topic on github</a> which can give you an idea of which themes are the most popular.
I went for <a href=https://github.com/adityatelange/hugo-PaperMod>papermod</a> as the theme.
There is a great guide <a href=https://github.com/adityatelange/hugo-PaperMod/wiki/nstallation>available at the papermod wiki</a> on how to install it.
I used method 2 and installed papermod as a Git Submodule as it makes it easy to apply future updates.</p><h3 id=architecture>Architecture<a hidden class=anchor aria-hidden=true href=#architecture>#</a></h3><p>If you have a free github account your site repo needs to be public.
When Hugo compiles your website all required content to render it is dumped into the <code>public</code> folder.
This means that in order to keep our drafts secret we can keep our main repo as a private repo and deploy the <code>public</code> folder to the public facing repo using github actions.
This ensures your drafts are kept secret until it&rsquo;s ready to be published.</p><p>Once your website is ready to be published it&rsquo;s time to setup the automated deployment.
I used the gh action template available at <a href=https://finisky.github.io/deployhugofromprivaterepo.en/>finisky</a> as a starting point and did the following changes:</p><ul><li>Updated the versions</li><li>Included the git submodules in the checkout step</li><li>Run Hugo with &ndash;minify flag to reduce the size of the generated HTML files which should give slightly faster page loading.</li></ul><p>Place the following script in your private repo in this directory: <code>.github/workflows/publish.yml</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>Hugo Build &amp; Deploy - Private to Public repo</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>pull_request</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>: [ <span style=color:#ae81ff>main ]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Checkout</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v4</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Fetch Hugo themes (true OR recursive)</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>    <span style=color:#75715e># Fetch all history for .GitInfo and .Lastmod</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>persist-credentials</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Setup Hugo</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Hugo setup</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v3</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;latest&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Download (if necessary) and use Hugo extended version. Example: true</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>extended</span>: <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Runs Hugo to build the Static Site</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Run Hugo</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                hugo --minify --logLevel info</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Deploy the Static Site to Public Repo (GitHub Pages)</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>JamesIves/github-pages-deploy-action@v4</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>with</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>token</span>:  <span style=color:#ae81ff>${{ secrets.PAT_DEPLOYMENT }}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>repository-name</span>: <span style=color:#ae81ff>haraldwb/haraldwb.github.io</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>branch</span>: <span style=color:#ae81ff>main</span> <span style=color:#75715e># The branch the action should deploy to.</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>folder</span>: <span style=color:#ae81ff>public</span> <span style=color:#75715e># The folder the action should deploy.</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>single-commit</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>commit-message</span>: <span style=color:#ae81ff>${{ github.event.pull_request.title }}</span>
</span></span></code></pre></td></tr></table></div></div><p>The action itself uses a combination of jobs, these are:</p><ul><li><a href=https://github.com/actions/checkout>Checkout</a> to make the private repo accessible to the rest of the workflow</li><li><a href=https://github.com/peaceiris/actions-hugo>Actions-Hugo</a> to build the Hugo site</li><li><a href=https://github.com/JamesIves/github-pages-deploy-action>GitHub Pages Deploy Action</a> for automatic deployment to Github Pages. In our case copying the <code>public</code> folder over the public facing repository.</li></ul><p>In order for the action to work we need to create a <a href=https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#about-personal-access-tokens>Personal Access Token (PAT).</a><br>Ideally we want a fine-grained PAT to be inline with principle of least privilege. The action requires <code>workflow</code> and <code>write:packages</code> scopes.
The latter is <a href=https://github.com/github/roadmap/issues/558>not supported yet</a> so we need to create a classic PAT.
Follow <a href=https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic>this guide</a> to create it.<br>After creating it change the <code>PAT_DEPLOYMENT</code> on line 36 in the script to the PAT secret name and change the <code>repository-name</code> on line 35 to your corresponding github pages.</p><p>This action deploys on pull request. If you&rsquo;d rather prefer it to run on pushes to main change lines 3-5 to:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>main</span>
</span></span></code></pre></td></tr></table></div></div><p>and remove the <code>commit-message</code> on line 41. I use <code>pull_request</code> as I like to verify that everything was published correctly and in case I find any last minute typos.</p><p>That should be it! If everything is configured correctly your site should be up and running and pushing changes to the site any time you do either a pull request or push depending on your config.</p><h2 id=optional-custom-domain-name>(Optional) Custom domain name<a hidden class=anchor aria-hidden=true href=#optional-custom-domain-name>#</a></h2><p>The workflow for how to use a custom domain name is available on <a href=https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site>github docs here</a>.
I also used <a href=https://stackoverflow.com/questions/9082499/custom-domain-for-github-project-pages>this stackoverflow post</a> for some clarification.
After finishing the configuration your DNS records should look something like this:</p><p><img alt="DNS records" loading=lazy src=/blog/dns_records_hboe.png#center></p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://hboe.no/>Harald W. Bøe</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>